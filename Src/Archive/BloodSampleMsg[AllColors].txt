#library "BloodSampleMsg"
#include "zcommon.acs"


script "BloodSampleMsg" (VOID)
{
	int Bloodsample = CheckInventory("Quest1sample");
	
	PrintBold(s:"\cNYou collected \cG", d:Bloodsample, s:"/5 \cNblood samples.");
	
}

Script "BloodSampleCounter"  ENTER
{
	while(true)
	{
	SetHudSize(340,240,1);
			
		int RedSample = CheckInventory("BloodSampleRED");
		int BlueSample = CheckInventory("BloodSampleBLUE");
		int GreenSample = CheckInventory("BloodSampleGREEN");
		int QuestGiven = CheckInventory("QuestGiven");
				
		if (QuestGiven == 1)
		{
			if (RedSample > 0)
			 {		
				SetFont("SMALLFONT");
				HudMessage(i:RedSample; HUDMSG_ALPHA, 3609010, CR_red, (FixedMul(0.125,340<<16)>>16<<16), (FixedMul(0.105,240<<16)>>16<<16), 0.1, 1.0);
				
				SetFont("BL0SA0");
				HudMessage(s:"A"; HUDMSG_ALPHA, 3609013, CR_UNTRANSLATED,(FixedMul(0.125,340<<16)>>16<<16), (FixedMul(0.165,240<<16)>>16<<16), 0.1, 1.0);
			  
			}
			if (BlueSample > 0)
			 {		
				SetFont("SMALLFONT");
				HudMessage(i:BlueSample; HUDMSG_ALPHA, 3609011, CR_blue, (FixedMul(0.085,340<<16)>>16<<16), (FixedMul(0.105,240<<16)>>16<<16), 0.1, 1.0);
				
				SetFont("BL0SD0");
				HudMessage(s:"A"; HUDMSG_ALPHA, 3609014, CR_UNTRANSLATED,(FixedMul(0.085,340<<16)>>16<<16), (FixedMul(0.165,240<<16)>>16<<16), 0.1, 1.0);
			  
			}
			if (GreenSample > 0)
			 {		
				SetFont("SMALLFONT");
				HudMessage(i:GreenSample; HUDMSG_ALPHA, 3609012, CR_green, (FixedMul(0.045,340<<16)>>16<<16), (FixedMul(0.105,240<<16)>>16<<16), 0.1, 1.0);
				
				SetFont("BL0SG0");
				HudMessage(s:"A"; HUDMSG_ALPHA, 3609015, CR_UNTRANSLATED,(FixedMul(0.045,340<<16)>>16<<16), (FixedMul(0.165,240<<16)>>16<<16), 0.1, 1.0);
			  
			}
			/*
			else 
			{
			SetFont("Blank");
			HudMessage(s:"A"; HUDMSG_ALPHA, 3609010, CR_UNTRANSLATED, 0, 0, 0.01, 1.0);
			HudMessage(s:"A"; HUDMSG_ALPHA, 3609011, CR_UNTRANSLATED, 0, 0, 0.01, 1.0);
			HudMessage(s:"A"; HUDMSG_ALPHA, 3609012, CR_UNTRANSLATED, 0, 0, 0.01, 1.0);
			HudMessage(s:"A"; HUDMSG_ALPHA, 3609013, CR_UNTRANSLATED, 0, 0, 0.01, 1.0);
			HudMessage(s:"A"; HUDMSG_ALPHA, 3609014, CR_UNTRANSLATED, 0, 0, 0.01, 1.0);
			HudMessage(s:"A"; HUDMSG_ALPHA, 3609015, CR_UNTRANSLATED, 0, 0, 0.01, 1.0);
			}
			*/
		}
		/*else 
			{
			SetFont("Blank");
			HudMessage(s:"A"; HUDMSG_ALPHA, 3609010, CR_UNTRANSLATED, 0, 0, 0.01, 1.0);
			HudMessage(s:"A"; HUDMSG_ALPHA, 3609011, CR_UNTRANSLATED, 0, 0, 0.01, 1.0);
			HudMessage(s:"A"; HUDMSG_ALPHA, 3609012, CR_UNTRANSLATED, 0, 0, 0.01, 1.0);
			HudMessage(s:"A"; HUDMSG_ALPHA, 3609013, CR_UNTRANSLATED, 0, 0, 0.01, 1.0);
			HudMessage(s:"A"; HUDMSG_ALPHA, 3609014, CR_UNTRANSLATED, 0, 0, 0.01, 1.0);
			HudMessage(s:"A"; HUDMSG_ALPHA, 3609015, CR_UNTRANSLATED, 0, 0, 0.01, 1.0);
			}*/
	delay(1);
	}
}

	
Script "QuestReset"  ENTER
{
	TAKEINVENTORY("ScientistFirstmet", 1);
	TAKEINVENTORY("scientinsanetoken", 1);
	TakeInventory("QuestGiven", 1);
	delay(1);
}




script "ScientistAllySpawner" enter
{
    Thing_ChangeTID(0, 1000 + PlayerNumber());
	int counter;	
    if (GetActorProperty((1000 + PlayerNumber()), APROP_Health) > 0 )
        while(counter < CheckInventory("NumberOfAlliesScientist"))
        {
			int spawnedScientistTID = UniqueTID();
			
			int offset = 50;//64; // Modify this value to adjust the offset distance
			
            SpawnForced("Scientist", GetActorX(1000 + PlayerNumber()) + offset, GetActorY(1000 + PlayerNumber()) + offset, GetActorZ(1000 + PlayerNumber()));
            counter++;
        }
        counter = 0;
}



script "AddScientistAlly" (void)
{
	 for (int p = 0; p < 8; p++)
    {
        if (PlayerInGame(p))
        {
		GiveActorInventory(1000 + p,"NumberOfAlliesScientist", 1);
		}
	}
}

Script "RemoveScientistAlly" (void)
{
    for (int p = 0; p < 8; p++)
    {
        if (PlayerInGame(p))
		{
		TakeActorInventory(1000 + p,"NumberOfAlliesScientist", 1);
		}
	}
}